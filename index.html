<!doctype html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Senti | Sentify your space.</title>
  <meta name="description" content="Senti is a emotional space analysis platform for you to contribute and view sentiment on a heatmap of your university. Built by students, for students.">
  <meta property="og:image" content="./senti-poster.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tw-elements/dist/css/index.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/flowbite@1.5.3/dist/flowbite.min.css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
  <link rel="manifest" href="./site.webmanifest">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-2.14.0.min.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'regal-blue': '#243c5a',
            /*
            nord0->nord3, dark colors,"polar night"
            nord4->nord6, light colors, "snow storm"
            nord7 = pale green
            nord8 = blue
            nord9 = blue
            nord10 = blue
            nord11 = red
            nord12 = orange
            nord13 = yellow
            nord14 = green
            nord15 = purple
            */
            'nord0': '#2e3440',
            'nord1': '#3b4252',
            'nord2': '#434c5e',
            'nord3': '#4c566a',
            'nord4': '#d8dee9',
            'nord5': '#e5e9f0',
            'nord6': '#eceff4',
            'nord7': '#8fbcbb',
            'nord8': '#88c0d0',
            'nord9': '#81a1c1',
            'nord10': '#5e81ac',
            'nord11': '#bf616a',
            'nord12': '#d08770',
            'nord13': '#ebcb8b',
            'nord14': '#a3be8c',
            'nord15': '#b48ead'
          },
          fontFamily: {
            // sans: ['Inter var', ...defaultTheme.fontFamily.sans],
          }
        }
      }
    }

  </script>
  <style>
    /* Special styling for WebKit/Blink */
    input[type=range]::-webkit-slider-thumb {
      -webkit-appearance: none;
      height: 36px;
      width: 36px;
      background: #88c0d0;
    }

    /* All the same stuff for Firefox */
    input[type=range]::-moz-range-thumb {
      background: #88c0d0;
      width: 100%;
      height: 36px;
      width: 36px;
      cursor: pointer;
      /* Hides the slider so custom styles can be added */
      background: transparent;
      border-color: transparent;
      color: transparent;
    }

    /* All the same stuff for IE */
    input[type=range]::-ms-thumb {
      background: #88c0d0;
      height: 36px;
      width: 36px;
      cursor: pointer;
    }
  </style>
  <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
</head>

<body class="h-screen flex flex-col bg-nord0">
  <!-- This example requires Tailwind CSS v2.0+ -->
  <nav class="bg-nord0 border-gray-200 px-5 sm:px-4 py-2.5 rounded">
    <div class="container flex flex-wrap justify-between items-center mx-auto">
      <a href="index.html" class="flex items-center">
          <img src="senti-logo.svg" class="mr-3 h-6 sm:h-9" alt="Flowbite Logo" />
      </a>
      <button data-collapse-toggle="navbar-default" type="button" class="inline-flex items-center p-2 ml-3 text-sm text-nord6 rounded-lg md:hidden hover:bg-nord2 focus:outline-none focus:ring-2 focus:ring-nord3 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600" aria-controls="navbar-default" aria-expanded="false">
        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
      </button>
      <div class="hidden w-full md:block md:w-auto" id="navbar-default">
        <ul class="flex flex-col p-4 mt-4 bg-nord0 rounded-lg border border-nord3 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium md:border-0 md:bg-nord0 dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
          <li>
            <a href="index.html" class="block py-2 pr-4 pl-3 text-nord6 bg-gradient-to-r from-nord8 to-nord9 hover:from-nord9 hover:to-nord8 rounded md:bg-transparent md:text-transparent md:bg-clip-text md:bg-gradient-to-r md:from-nord8 md:to-nord9 md:hover:from-nord9 md:hover:to-nord8 md:p-0 dark:text-white" aria-current="page">add your senti</a>
          </li>
          <li>
            <a href="find.html" class="block py-2 pr-4 pl-3 text-nord6 rounded bg-gradient-to-r hover:from-nord8 hover:to-nord9 md:hover:bg-transparent md:text-white md:hover:text-transparent md:hover:bg-clip-text md:hover:bg-gradient-to-r md:hover:from-nord9 md:hover:to-nord8 md:border-0 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">find senti</a>
          </li>
          <li>
            <a href="sentis.html" class="block py-2 pr-4 pl-3 text-nord6 rounded bg-gradient-to-r hover:from-nord8 hover:to-nord9 md:hover:bg-transparent md:text-white md:hover:text-transparent md:hover:bg-clip-text md:hover:bg-gradient-to-r md:hover:from-nord9 md:hover:to-nord8 md:border-0 md:p-0 dark:text-gray-400 md:dark:hover:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">see senti</a>
          </li>
        </ul>
      </div>
    </div>
    <hr class="mt-2 invisible sm:visible dark space-y-1 border-1 border-nord3">
  </nav>
  <div class="dark h-4/5 flex flex-col justify-center items-center border-3" method="GET">
    <form action="Sentis.html" class="dark sm:w-4/5 h-4/5 px-5 sm:px-20 sm:py-10 flex flex-col justify-center space-y-8" method="GET" id="addSenti">
      <div class="dark md:space-x-2 flex flex-col md:flex-row justify-center">
        <h1 class="dark text-nord4 text-6xl font-extrabold">i'm feeling</h1>
        <h1 id="typeText"
          class="dark font-extrabold text-transparent text-6xl bg-clip-text bg-gradient-to-r from-nord8 to-nord9">
          content.
        </h1>
      </div>

      <div class="dark space-x-2 flex flex-row justify-center items-center">
        <p1 class="dark text-5xl">😔</p1>
        <input id="valueControl" name="value" type="range" value="50"
          class="newthumb w-full h-3 bg-nord8 nord8 rounded-lg appearance-none cursor-pointer dark:bg-nord3">
        <p1 class="text-5xl">😊</p1>
      </div>
      <div class="flex flex-col justify-between space-y-3">
        <textarea id="message" rows="4" style="resize: none;"
          class="text-xl block p-2.5 w-full text-gray-900 bg-gray-50 rounded-lg border border-nord2 focus:ring-nord2 focus:border-nord2 dark:bg-nord1 dark:border-nord0 dark:placeholder-gray-400 dark:text-nord8"
          placeholder="Describe your senti..."></textarea>
        <div class="flex flex-row justify-between items-center">
          <div class="flex flex-row justify-left around font-light space-x-1 text-gray-500 dark:text-gray-400">
            <p1 id="characters" class="text-sm font-bold">0</p1>
            <p1 id="characterLabel" class="text-sm"> characters</p1>
          </div>
          <div class="flex flex-row justify-end items-center around text-nord6">
            <p class="invisible lg:visible flex items-center text-sm font-light text-gray-500 dark:text-gray-400 mr-3">why we need your location <button data-popover-target="popover-description" data-popover-placement="bottom-end" type="button"><svg class="ml-2 w-4 h-4 text-gray-400 hover:text-gray-500" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg><span class="sr-only">Show information</span></button></p>
            <p class="lg:hidden flex items-center text-sm font-light text-gray-500 dark:text-gray-400 mr-3">location<button data-popover-target="popover-description" data-popover-placement="bottom-end" type="button"><svg class="ml-2 w-4 h-4 text-gray-400 hover:text-gray-500" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg><span class="sr-only">Show information</span></button></p>
<div data-popover id="popover-description" role="tooltip" class="inline-block absolute invisible z-10 w-72 text-sm font-light text-gray-500 bg-white rounded-lg border border-gray-200 shadow-sm opacity-0 transition-opacity duration-300 dark:bg-nord1 dark:border-gray-600 dark:text-gray-400">
    <div class="p-3 space-y-2">
        <h3 class="font-semibold text-gray-900 dark:text-nord6">Anonymous heatmap</h3>
        <p>We collect anonymous location information in order to populate our heatmap of emotions. This allows us to provide our space analysis for you! Your location will never be matched with your identity.</p>
    </div>
    <div data-popper-arrow></div>
</div>
            <button type="submit"
              class="text-nord6 bg-gradient-to-r from-nord8 to-nord9 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-nord8 dark:focus:ring-nord9 font-medium rounded-lg text-sm px-5 py-2.5 text-center">Submit</button>
          </div>
        </div>
      </div>
    </form>
  </div>
  </div>
  <hr class="space-y-1 border-1 border-nord3">
  <footer class="flex flex-1 flex-col justify-center items-center text-center">
    <h2 class="text-nord4 text-l text-medium">Made with ❤️ by the <b>bonobo</b> team.</h2>
  </footer>
  <script src="https://unpkg.com/flowbite@1.5.3/dist/flowbite.js"></script>
  <script>
    var range = document.getElementById("valueControl");
    var type = document.getElementById("typeText");
    var message = document.getElementById("message");
    var characters = document.getElementById("characters");
    var characterLabel = document.getElementById("characterLabel");
    var types = ["sad.", "down.", "content.", "happy.", "ecstatic."];

    range.addEventListener("input", changeType);

    function changeType() {
      if (range.value < 20) {
        type.innerText = types[0];
      } else if (range.value < 40) {
        type.innerText = types[1];
      } else if (range.value < 60) {
        type.innerText = types[2];
      } else if (range.value < 80) {
        type.innerText = types[3];
      } else {
        type.innerText = types[4];
      }
    }

    message.addEventListener("input", changeCharacterCount);

    function changeCharacterCount() {
      characters.innerText = message.value.length;
      if (message.value.length == 1) {
        characterLabel.innerText = "character";
      } else {
        characterLabel.innerText = "characters";
      }
    }
  </script>
<script type = 'module'>
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
  import { getDatabase, push, set, child, ref} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js";
 
  const firebaseConfig = {
    apiKey: "AIzaSyAHRbCmE_ynGBxlW0x5J9u9H3XBOrFhedA",
    authDomain: "beyou-21d2f.firebaseapp.com",
    databaseURL: "https://beyou-21d2f-default-rtdb.firebaseio.com",
    projectId: "beyou-21d2f",
    storageBucket: "beyou-21d2f.appspot.com",
    messagingSenderId: "718679255077",
    appId: "1:718679255077:web:a5d19b54e474a1d968b7cc",
    measurementId: "G-FVD7M6CJ1Z"
  };
 
const app = initializeApp(firebaseConfig);

var postDatabase = getDatabase(app);

document.getElementById('addSenti').addEventListener('submit', submit);

function submit(e)
{
    e.preventDefault();

    
    if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(saveLocation);
    }
}

function saveLocation(position) {
  var date = new Date();
  var type = document.getElementById("typeText").innerText;
  var text = document.getElementById("message").value;
  var value = document.getElementById("valueControl").value;
  var location = [position.coords.latitude, position.coords.longitude];
  var time  = date.toLocaleDateString() + ", " + date.toLocaleTimeString();
  console.log('working');
  saveMessages(location, type, value, text, time);
}

const saveMessages = (location, type, value, text, time) => 
{
    var newPost = push(child(ref(postDatabase), 'Posts'));

    set(newPost,{
        location: location,
        type:type,
        text:text,
        value:value,
        time: time,
    }).then(function(){
      window.location = "sentis.html?" + "value=" + value;
    });

};

const getElementVal = (id) => {
    return document.getElementById(id).value;
};

// set the tooltip content element
const targetEl = document.getElementById('tooltipContent');

// set the element that trigger the tooltip using hover or click
const triggerEl = document.getElementById('tooltipButton');

// options with default values
const options = {
  placement: 'bottom',
  triggerType: 'hover',
  onHide: () => {
      console.log('tooltip is shown');
  },
  onShow: () => {
      console.log('tooltip is hidden');
  }
};
</script>
</body>

</html>
